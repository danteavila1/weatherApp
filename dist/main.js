(()=>{const e=document.querySelector(".search button"),t=document.querySelector(".search-bar"),n=document.querySelector(".daily-container");e.addEventListener("click",(function(){let e=t.value;a(e),r(e)}));const a=e=>{fetch(`http://api.weatherapi.com/v1/current.json?key=dcf626c1b3c54fc5aca215757243001&q=${e}`).then((e=>{if(!e.ok)throw alert("Invalid Location!"),new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((t=>{let n={};n.currentTemperature=t.current.temp_c,n.humidity=t.current.humidity,n.weatherWind=t.current.wind_kph,n.conditionText=t.current.condition.text,n.conditionIcon="https:"+t.current.condition.icon;let a=new Date(t.current.last_updated),r=a.getHours(),d=a.getMinutes();d=d<10?"0"+d:d;let o=["Sunday","Monday","Tuesday","Wednesday","Tuesday","Friday","Saturday"][a.getDay()];o+=" "+r+" : "+d,n.dayOfWeekStr=o,c(n,e)})).catch((e=>console.log("There was a problem with fetch operation "+e.message)))},c=(e,t)=>{document.body.style.backgroundImage="url('https://source.unsplash.com/1920x1080/?"+t+"')",cityName.innerHTML=t.charAt(0).toUpperCase()+t.slice(1),today.innerHTML=e.dayOfWeekStr,currentTemp.innerHTML=e.currentTemperature+"°C",condition.innerHTML=e.conditionText,humidity.innerHTML="Humidity: "+e.humidity+"%",wind.innerHTML="Wind speed: "+e.weatherWind+" km/h",document.getElementById("currentIcon").src=e.conditionIcon},r=e=>{const t=`http://api.weatherapi.com/v1/forecast.json?key=dcf626c1b3c54fc5aca215757243001&q=${e}&days=3`;n.innerHTML="",fetch(t).then((e=>{if(!e.ok)throw alert("Invalid Location!"),new`HTTP error! status: ${e.status}`;return e.json()})).then((t=>{t.forecast.forecastday.forEach((t=>{let a={};a.currentTemperature=Math.round(t.day.avgtemp_c),a.conditionIcon="https:"+t.day.condition.icon,a.windSpeed=t.day.maxwind_kph,a.humidity=t.day.avghumidity,a.conditionText=t.day.condition.text,a.minTemp=Math.round(t.day.mintemp_c),a.maxTemp=Math.round(t.day.maxtemp_c);let c=new Date(t.date).getDay();a.dayOfWeekStr=["Monday","Tuesday","Wednesday","Tuesday","Friday","Saturday","Sunday"][c];let r=d(a,e);n.appendChild(r)}))})).catch((e=>console.log("There was a problem with the fetch operation "+e.message)))},d=(e,t)=>{let n=document.createElement("div");n.className="daily-forecast";let a=document.createElement("div");a.className="weekday",a.textContent=e.dayOfWeekStr.substring(0,3),n.appendChild(a);let r=document.createElement("div"),d=document.createElement("img");d.id="currentIcon",d.src=e.conditionIcon,r.appendChild(d),n.appendChild(r);let o=document.createElement("div");o.className="max-min-temp";let i=document.createElement("span");i.className="temp",i.textContent=e.maxTemp+"°",o.appendChild(i);let u=document.createElement("span");return u.className="temp",u.textContent=e.minTemp+"°",o.appendChild(u),n.appendChild(o),n.addEventListener("click",(function(){c(e,t)})),n}})();